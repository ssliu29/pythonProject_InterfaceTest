{"uid":"fcf31c0b5ebff498","name":"test_case[dic4]","fullName":"testCase.test_case.TestCase#test_case","historyId":"c42786b862befbb122e2cb1c546ddd71","time":{"start":1683368515771,"stop":1683368518233,"duration":2462},"status":"failed","statusMessage":"AssertionError: 预期结果与实际结果不符，预期结果：{'errorCode':'0'},实际结果：0\nassert '0' == \"{'errorCode':'0'}\"\n  - {'errorCode':'0'}\n  + 0","statusTrace":"self = <testCase.test_case.TestCase object at 0x10c2adf00>\ndic = {'caseid': 1.0, 'expect': \"{'errorCode':'0'}\", 'header': '{\"cookie\":\"JSESSIONID=16B09AE5748DA760B9C844B4B88A00DF; Path...b90bcb70640183e09d1e755ead823; Domain=wanandroid.com; Expires=Mon, 05-Jun-2023 10:21:58 GMT; Path=/\"}', 'id': 5.0, ...}\n\n    @pytest.mark.parametrize(\"dic\", test_data)\n    def test_case(self, dic):\n        logger.debug(f\"====>{dic}\")\n        # 判断是否有依赖,执行依赖接口替换依赖字段\n        ps = PreSolve(test_data)\n        dic[\"header\"], dic[\"value\"] = ps.presolve(dic)\n        #实例化\n        ch = ConfigHttp(dic)\n        #调用实例方法\n        res = ch.run()\n        # 实例化\n        pa = PublicAssert(dic, res)\n        # 调用实例方法断言\n        pa.public_assert()\n        # 将响应的json数据转化成字典\n        res_dict = res.json()\n    \n        # 坑一：用if断言需在失败情况下抛出assertion\n        # if str(res_dict[\"errorCode\"]) == str(dic[\"expect\"]):\n        #     print(\"用例执行成功\")\n        # else:\n        #     print(\"用例执行失败\")\n        #     raise AssertionError(\"预期结果与实际结果不符\")\n    \n        # 坑二：try-except不要加在self.assertEqual前后，否则unittest捕获不到AssertionError,就默认为用例通过\n        # try:\n        #     assert str(res_dict[\"errorCode\"]) ==str(dic[\"expect\"]), f\"预期结果与实际结果不符，预期结果：{dic['except']},实际结果：{res_dict['errorCode']}\"\n        # except Exception as msg:\n        #     print(f\"报错信息：{msg}\")\n        #     raise\n    \n        # 2.1.3断言返回的实际结果，断言用例执行成功/失败\n>       assert str(res_dict[\"errorCode\"]) == str(dic[\"expect\"]), f\"预期结果与实际结果不符，预期结果：{dic['expect']},实际结果：{res_dict['errorCode']}\"\nE       AssertionError: 预期结果与实际结果不符，预期结果：{'errorCode':'0'},实际结果：0\nE       assert '0' == \"{'errorCode':'0'}\"\nE         - {'errorCode':'0'}\nE         + 0\n\ntestCase/test_case.py:60: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"AssertionError: 预期结果与实际结果不符，预期结果：{'errorCode':'0'},实际结果：0\nassert '0' == \"{'errorCode':'0'}\"\n  - {'errorCode':'0'}\n  + 0","statusTrace":"self = <testCase.test_case.TestCase object at 0x10c2adf00>\ndic = {'caseid': 1.0, 'expect': \"{'errorCode':'0'}\", 'header': '{\"cookie\":\"JSESSIONID=16B09AE5748DA760B9C844B4B88A00DF; Path...b90bcb70640183e09d1e755ead823; Domain=wanandroid.com; Expires=Mon, 05-Jun-2023 10:21:58 GMT; Path=/\"}', 'id': 5.0, ...}\n\n    @pytest.mark.parametrize(\"dic\", test_data)\n    def test_case(self, dic):\n        logger.debug(f\"====>{dic}\")\n        # 判断是否有依赖,执行依赖接口替换依赖字段\n        ps = PreSolve(test_data)\n        dic[\"header\"], dic[\"value\"] = ps.presolve(dic)\n        #实例化\n        ch = ConfigHttp(dic)\n        #调用实例方法\n        res = ch.run()\n        # 实例化\n        pa = PublicAssert(dic, res)\n        # 调用实例方法断言\n        pa.public_assert()\n        # 将响应的json数据转化成字典\n        res_dict = res.json()\n    \n        # 坑一：用if断言需在失败情况下抛出assertion\n        # if str(res_dict[\"errorCode\"]) == str(dic[\"expect\"]):\n        #     print(\"用例执行成功\")\n        # else:\n        #     print(\"用例执行失败\")\n        #     raise AssertionError(\"预期结果与实际结果不符\")\n    \n        # 坑二：try-except不要加在self.assertEqual前后，否则unittest捕获不到AssertionError,就默认为用例通过\n        # try:\n        #     assert str(res_dict[\"errorCode\"]) ==str(dic[\"expect\"]), f\"预期结果与实际结果不符，预期结果：{dic['except']},实际结果：{res_dict['errorCode']}\"\n        # except Exception as msg:\n        #     print(f\"报错信息：{msg}\")\n        #     raise\n    \n        # 2.1.3断言返回的实际结果，断言用例执行成功/失败\n>       assert str(res_dict[\"errorCode\"]) == str(dic[\"expect\"]), f\"预期结果与实际结果不符，预期结果：{dic['expect']},实际结果：{res_dict['errorCode']}\"\nE       AssertionError: 预期结果与实际结果不符，预期结果：{'errorCode':'0'},实际结果：0\nE       assert '0' == \"{'errorCode':'0'}\"\nE         - {'errorCode':'0'}\nE         + 0\n\ntestCase/test_case.py:60: AssertionError","steps":[],"attachments":[{"uid":"121d66e4fc91730e","name":"log","source":"121d66e4fc91730e.txt","type":"text/plain","size":1480}],"parameters":[],"stepsCount":0,"attachmentsCount":1,"shouldDisplayMessage":true,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"testCase"},{"name":"suite","value":"test_case"},{"name":"subSuite","value":"TestCase"},{"name":"host","value":"liushadeMBP"},{"name":"thread","value":"9783-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"testCase.test_case"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"dic","value":"{'id': 5.0, 'interfaceUrl': 'https://www.wanandroid.com/lg/collect/addtool/json', 'name': 'collect', 'method': 'post', 'value': \"{'name':'${username}','link':'www.baidu.com'}\", 'header': '{\"cookie\":\"${Set-Cookie}\"}', 'rely': 'y', 'caseid': 1.0, 'expect': \"{'errorCode':'0'}\"}"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"fcf31c0b5ebff498.json","parameterValues":["{'id': 5.0, 'interfaceUrl': 'https://www.wanandroid.com/lg/collect/addtool/json', 'name': 'collect', 'method': 'post', 'value': \"{'name':'${username}','link':'www.baidu.com'}\", 'header': '{\"cookie\":\"${Set-Cookie}\"}', 'rely': 'y', 'caseid': 1.0, 'expect': \"{'errorCode':'0'}\"}"]}